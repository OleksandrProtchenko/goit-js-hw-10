{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iconError from '../img/toast/Group.png';\n\nconst inp = document.querySelector('#datetime-picker');\nconst btnStart = document.querySelector('[data-start]');\nconst timerDisplay = document.querySelectorAll('.value');\n\nlet userSelectedDate = null;\n\nbtnStart.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onClose(selectedDates) {\n    userSelectedDate = checkDate(selectedDates[0]);\n  },\n};\n\nconst optionsToast = {\n  title: 'Error',\n  message: 'Please choose a date in the future',\n  position: 'topRight',\n  close: true,\n  timeout: 2000,\n  pauseOnHover: false,\n  iconUrl: iconError,\n  backgroundColor: '#ef4040',\n  progressBarColor: '#b51b1b',\n  messageColor: '#ffffff',\n  titleColor: '#ffffff',\n  icon: null,\n};\n\nconst fp = flatpickr(inp, options);\n\nbtnStart.addEventListener('click', onStartTimer);\n\nfunction onStartTimer(event) {\n  userSelectedDate = fp.selectedDates[0];\n  const date = userSelectedDate.getTime();\n  const diff = convertMs(date - Date.now());\n  let timerID = null;\n\n  updateTimer(diff);\n  btnStart.disabled = true;\n  inp.disabled = true;\n\n  timerID = setInterval(() => {\n    const diff = date - Date.now();\n    const newDate = convertMs(diff);\n    if (diff <= 0) {\n      updateTimer(convertMs(0));\n      clearInterval(timerID);\n      inp.disabled = false;\n      return;\n    }\n    updateTimer(newDate);\n  }, 1000);\n}\n\nfunction checkDate(date) {\n  const diff = date - Date.now();\n  if (diff < 0) {\n    btnStart.disabled = true;\n    iziToast.error(optionsToast);\n    return;\n  }\n  btnStart.disabled = false;\n}\n\nfunction updateTimer(date) {\n  const { days, hours, minutes, seconds } = date;\n  const timerItems = [\n    addLeadingZero(days),\n    addLeadingZero(hours),\n    addLeadingZero(minutes),\n    addLeadingZero(seconds),\n  ];\n  timerItems.forEach((item, idx) => {\n    timerDisplay[idx].textContent = item;\n  });\n}\n\nfunction addLeadingZero(value) {\n  return `${value}`.padStart(2, 0);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["inp","btnStart","timerDisplay","userSelectedDate","options","selectedDates","checkDate","optionsToast","iconError","fp","flatpickr","onStartTimer","event","date","diff","convertMs","timerID","updateTimer","newDate","iziToast","days","hours","minutes","seconds","addLeadingZero","item","idx","value","ms"],"mappings":"0IAOA,MAAMA,EAAM,SAAS,cAAc,kBAAkB,EAC/CC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAe,SAAS,iBAAiB,QAAQ,EAEvD,IAAIC,EAAmB,KAEvBF,EAAS,SAAW,GAEpB,MAAMG,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CACrBF,EAAmBG,EAAUD,EAAc,CAAC,CAAC,CAC9C,CACH,EAEME,EAAe,CACnB,MAAO,QACP,QAAS,qCACT,SAAU,WACV,MAAO,GACP,QAAS,IACT,aAAc,GACd,QAASC,EACT,gBAAiB,UACjB,iBAAkB,UAClB,aAAc,UACd,WAAY,UACZ,KAAM,IACR,EAEMC,EAAKC,EAAUV,EAAKI,CAAO,EAEjCH,EAAS,iBAAiB,QAASU,CAAY,EAE/C,SAASA,EAAaC,EAAO,CAC3BT,EAAmBM,EAAG,cAAc,CAAC,EACrC,MAAMI,EAAOV,EAAiB,UACxBW,EAAOC,EAAUF,EAAO,KAAK,IAAK,CAAA,EACxC,IAAIG,EAAU,KAEdC,EAAYH,CAAI,EAChBb,EAAS,SAAW,GACpBD,EAAI,SAAW,GAEfgB,EAAU,YAAY,IAAM,CAC1B,MAAMF,EAAOD,EAAO,KAAK,IAAG,EACtBK,EAAUH,EAAUD,CAAI,EAC9B,GAAIA,GAAQ,EAAG,CACbG,EAAYF,EAAU,CAAC,CAAC,EACxB,cAAcC,CAAO,EACrBhB,EAAI,SAAW,GACf,MACD,CACDiB,EAAYC,CAAO,CACpB,EAAE,GAAI,CACT,CAEA,SAASZ,EAAUO,EAAM,CAEvB,GADaA,EAAO,KAAK,IAAG,EACjB,EAAG,CACZZ,EAAS,SAAW,GACpBkB,EAAS,MAAMZ,CAAY,EAC3B,MACD,CACDN,EAAS,SAAW,EACtB,CAEA,SAASgB,EAAYJ,EAAM,CACzB,KAAM,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKV,EACvB,CACjBW,EAAeJ,CAAI,EACnBI,EAAeH,CAAK,EACpBG,EAAeF,CAAO,EACtBE,EAAeD,CAAO,CAC1B,EACa,QAAQ,CAACE,EAAMC,IAAQ,CAChCxB,EAAawB,CAAG,EAAE,YAAcD,CACpC,CAAG,CACH,CAEA,SAASD,EAAeG,EAAO,CAC7B,MAAO,GAAGA,CAAK,GAAG,SAAS,EAAG,CAAC,CACjC,CAEA,SAASZ,EAAUa,EAAI,CAMrB,MAAMR,EAAO,KAAK,MAAMQ,EAAK,KAAG,EAC1BP,EAAQ,KAAK,MAAOO,EAAK,MAAO,IAAI,EACpCN,EAAU,KAAK,MAAQM,EAAK,MAAO,KAAQ,GAAM,EACjDL,EAAU,KAAK,MAASK,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAR,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}